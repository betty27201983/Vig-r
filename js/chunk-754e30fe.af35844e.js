(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-754e30fe"],{"0b42":function(t,e,c){var n=c("da84"),a=c("e8b5"),o=c("68ee"),i=c("861d"),s=c("b622"),r=s("species"),l=n.Array;t.exports=function(t){var e;return a(t)&&(e=t.constructor,o(e)&&(e===l||a(e.prototype))?e=void 0:i(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?l:e}},"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),o=c("2d00"),i=a("species");t.exports=function(t){return o>=51||!n((function(){var e=[],c=e.constructor={};return c[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,c){var n=c("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},8418:function(t,e,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var i=n(e);i in t?a.f(t,i,o(0,c)):t[i]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("da84"),o=c("d039"),i=c("e8b5"),s=c("861d"),r=c("7b0b"),l=c("07fa"),u=c("8418"),d=c("65f0"),b=c("1dde"),h=c("b622"),p=c("2d00"),j=h("isConcatSpreadable"),f=9007199254740991,O="Maximum allowed index exceeded",g=a.TypeError,v=p>=51||!o((function(){var t=[];return t[j]=!1,t.concat()[0]!==t})),m=b("concat"),y=function(t){if(!s(t))return!1;var e=t[j];return void 0!==e?!!e:i(t)},x=!v||!m;n({target:"Array",proto:!0,forced:x},{concat:function(t){var e,c,n,a,o,i=r(this),s=d(i,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?i:arguments[e],y(o)){if(a=l(o),b+a>f)throw g(O);for(c=0;c<a;c++,b++)c in o&&u(s,b,o[c])}else{if(b>=f)throw g(O);u(s,b++,o)}return s.length=b,s}})},b789:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),a={class:"container notoTC"},o={style:{"margin-top":"133px","margin-bottom":"80px"}},i=Object(n["h"])("div",{class:"position-relative m-5"},[Object(n["h"])("div",{class:"progress",style:{height:"1px"}},[Object(n["h"])("div",{class:"progress-bar",role:"progressbar",style:{width:"0%"},"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"})]),Object(n["h"])("div",{class:"position-absolute top-0 start-0 translate-middle bg-primary text-center p-1 text-white rounded-pill",style:{width:"2rem",height:"2rem"}},"1"),Object(n["h"])("div",{class:"position-absolute top-0 start-50 translate-middle bg-secondary text-center p-1 text-white rounded-pill",style:{width:"2rem",height:"2rem"}},"2"),Object(n["h"])("div",{class:"position-absolute top-0 start-100 translate-middle bg-secondary text-center p-1 text-white rounded-pill",style:{width:"2rem",height:"2rem"}},"3")],-1),s=Object(n["h"])("h2",null,[Object(n["h"])("i",{class:"bi bi-bag-check-fill pe-2"}),Object(n["j"])("購物車"),Object(n["h"])("span",{class:"fs-6 text-muted"},"/確認購物車品項")],-1),r={key:0,class:"text-center"},l=Object(n["h"])("i",{class:"bi bi-cart4 display-1 fw-bold text-primary"},null,-1),u=Object(n["h"])("p",{class:"bg-light text-primary fs-4 p-3"},"購物車目前無商品，歡迎選購",-1),d=Object(n["j"])("前往逛逛！"),b={key:1,class:"table align-middle"},h=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th"),Object(n["h"])("th",null,"品名"),Object(n["h"])("th",{style:{width:"110px"}},"數量"),Object(n["h"])("th",null,"單價")])],-1),p=["disabled","onClick"],j=Object(n["h"])("i",{class:"bi bi-x"},null,-1),f=[j],O={key:0,class:"text-success"},g={class:"input-group input-group-sm"},v=["disabled","onChange","onUpdate:modelValue"],m={class:"input-group-text"},y={class:"text-end"},x={key:0,class:"text-success"},C=Object(n["h"])("td",{colspan:"3",class:"text-end"},"總計",-1),w={class:"text-end"},k={key:0},_=Object(n["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),I={class:"text-end text-success"},$={class:"d-flex justify-content-between"},L={class:"input-group mb-3 input-group-sm w-50"},z={class:"input-group-append"},q=Object(n["j"])("前往結帳"),A=Object(n["h"])("i",{class:"bi bi-caret-right-fill ms-1"},null,-1);function K(t,e,c,j,K,U){var T=Object(n["H"])("Loading"),M=Object(n["H"])("router-link");return Object(n["z"])(),Object(n["g"])(n["a"],null,[Object(n["k"])(T,{active:t.isLoading},null,8,["active"]),Object(n["h"])("div",a,[Object(n["h"])("div",o,[i,s,void 0!==K.cart.carts&&K.cart.carts.length<=0?(Object(n["z"])(),Object(n["g"])("div",r,[l,u,Object(n["k"])(M,{to:"/item",class:"btn btn-primary mb-5"},{default:Object(n["T"])((function(){return[d]})),_:1})])):(Object(n["z"])(),Object(n["g"])("table",b,[h,Object(n["h"])("tbody",null,[K.cart.carts?(Object(n["z"])(!0),Object(n["g"])(n["a"],{key:0},Object(n["F"])(K.cart.carts,(function(e){return Object(n["z"])(),Object(n["g"])("tr",{key:e.id},[Object(n["h"])("td",null,[Object(n["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:K.status.loadingItem===e.id,onClick:function(t){return U.removeCartItem(e.id)}},f,8,p)]),Object(n["h"])("td",null,[Object(n["j"])(Object(n["K"])(e.product.title)+" ",1),e.coupon?(Object(n["z"])(),Object(n["g"])("div",O," 已套用優惠券 ")):Object(n["f"])("",!0)]),Object(n["h"])("td",null,[Object(n["h"])("div",g,[Object(n["U"])(Object(n["h"])("input",{type:"number",class:"form-control",min:"1",disabled:e.id===K.status.loadingItem,onChange:function(t){return U.updateCart(e)},"onUpdate:modelValue":function(t){return e.qty=t}},null,40,v),[[n["O"],e.qty,void 0,{number:!0}]]),Object(n["h"])("div",m,"/ "+Object(n["K"])(e.product.unit),1)])]),Object(n["h"])("td",y,[K.cart.final_total!==K.cart.total?(Object(n["z"])(),Object(n["g"])("small",x,"折扣價：")):Object(n["f"])("",!0),Object(n["j"])(" "+Object(n["K"])(t.$filters.currency(e.final_total)),1)])])})),128)):Object(n["f"])("",!0)]),Object(n["h"])("tfoot",null,[Object(n["h"])("tr",null,[C,Object(n["h"])("td",w,Object(n["K"])(t.$filters.currency(K.cart.total)),1)]),K.cart.final_total!==K.cart.total?(Object(n["z"])(),Object(n["g"])("tr",k,[_,Object(n["h"])("td",I,Object(n["K"])(t.$filters.currency(K.cart.final_total)),1)])):Object(n["f"])("",!0)])])),Object(n["h"])("div",$,[Object(n["h"])("div",L,[Object(n["U"])(Object(n["h"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=function(t){return K.coupon_code=t}),placeholder:"請輸入優惠碼"},null,512),[[n["O"],K.coupon_code]]),Object(n["h"])("div",z,[Object(n["h"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=function(){return U.addCouponCode&&U.addCouponCode.apply(U,arguments)})}," 套用優惠碼 ")])]),Object(n["k"])(M,{to:"/cartInfo",type:"button",class:"btn btn-outline-primary h-50"},{default:Object(n["T"])((function(){return[q,A]})),_:1})])])])],64)}c("99af");var U={data:function(){return{products:[],product:{},status:{loadingItem:""},cart:{},coupon_code:""}},methods:{getProducts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("betty-api","/products/all");this.isLoading=!0,this.$http.get(e).then((function(e){t.products=e.data.products,console.log("products:",e),t.isLoading=!1}))},getProduct:function(t){this.$router.push("/product/".concat(t))},addCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("betty-api","/cart");this.status.loadingItem=t;var n={product_id:t,qty:1};this.$http.post(c,{data:n}).then((function(t){e.status.loadingItem="",console.log(t)}))},getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("betty-api","/cart");this.isLoading=!0,this.$http.get(e).then((function(e){console.log(e),t.cart=e.data.data,t.isLoading=!1}))},updateCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("betty-api","/cart/").concat(t.id);this.isLoading=!0,this.status.loadingItem=t.id;var n={product_id:t.product_id,qty:t.qty};this.$http.put(c,{data:n}).then((function(t){console.log(t),e.status.loadingItem="",e.getCart()}))},removeCartItem:function(t){var e=this;this.status.loadingItem=t;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("betty-api","/cart/").concat(t);this.isLoading=!0,this.$http.delete(c).then((function(t){e.$httpMessageState(t,"移除購物車品項"),e.status.loadingItem="",e.getCart(),e.isLoading=!1}))},addCouponCode:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("betty-api","/coupon"),c={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:c}).then((function(e){t.$httpMessageState(e,"加入優惠券"),t.getCart(),t.isLoading=!1}))}},created:function(){this.getProducts(),this.getCart()}},T=c("6b0d"),M=c.n(T);const P=M()(U,[["render",K]]);e["default"]=P},e8b5:function(t,e,c){var n=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-754e30fe.af35844e.js.map