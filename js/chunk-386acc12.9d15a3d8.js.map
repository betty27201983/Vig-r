{"version":3,"sources":["webpack:///./src/components/Pagination.vue","webpack:///./src/components/Pagination.vue?2044","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/backend/Orders.vue","webpack:///./src/components/OrderModal.vue","webpack:///./src/components/OrderModal.vue?25c1","webpack:///./src/views/backend/Orders.vue?3be1"],"names":["aria-label","class","_createElementVNode","aria-hidden","_hoisted_4","_hoisted_8","$props","total_pages","_createElementBlock","has_pre","href","onClick","$options","current_page","_Fragment","_renderList","page","key","_hoisted_6","has_next","props","emits","template","methods","updatePage","this","pages","$emit","__exports__","render","DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable","get","error","_createVNode","_component_Loading","active","$data","_hoisted_2","item","length","is_paid","_toDisplayString","_ctx","date","create_at","user","email","products","product","i","title","qty","unit","currency","total","type","role","id","$event","for","_hoisted_12","_hoisted_13","_component_OrderModal","order","ref","onUpdatePaid","_component_Pagination","onUpdatePage","_component_DelModal","onDelItem","tabindex","aria-labelledby","data-bs-dismiss","style","_hoisted_10","_hoisted_11","name","tel","_hoisted_14","address","_hoisted_16","_hoisted_18","_hoisted_19","_hoisted_20","paid_date","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_26","_hoisted_27","_hoisted_29","final_total","_hoisted_32","Object","default","data","status","modal","tempOrder","isPaid","mixins","modalMixin","inject","watch","orders","isNew","pagination","isLoading","components","Pagination","DelModal","OrderModal","getOrders","api","process","$http","then","response","success","$httpMessageState","res","catch","openModal","orderComponent","$refs","showModal","openDelOrderModal","delComponent","delModal","updatePaid","paid","put","currentPage","delOrder","url","delete","console","log","hideModal","created"],"mappings":"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","file":"js/chunk-386acc12.9d15a3d8.js","sourcesContent":["<template id=\"pagination-template\">\r\n  <nav aria-label=\"Page navigation\" v-if=\"pages.total_pages > 1\">\r\n    <ul class=\"pagination justify-content-center\">\r\n      <li class=\"page-item\" v-if=\"pages.has_pre\">\r\n        <a class=\"page-link\" href=\"#\" aria-label=\"Previous\" @click.prevent=\"updatePage(pages.current_page - 1)\">\r\n          <span aria-hidden=\"true\">&laquo;</span>\r\n        </a>\r\n      </li>\r\n      <li class=\"page-item\" v-for=\"page in pages.total_pages\" :key=\"page\"\r\n      :class=\"{ 'active': page === pages.current_page }\">\r\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(page)\">\r\n          {{ page }}\r\n        </a>\r\n      </li>\r\n      <li class=\"page-item\">\r\n        <a class=\"page-link\" href=\"#\" aria-label=\"Next\"\r\n          v-if=\"pages.has_next\"\r\n          @click.prevent=\"updatePage(pages.current_page + 1)\">\r\n          <span aria-hidden=\"true\">&raquo;</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\n// :pages=\"{ 頁碼資訊 }\"\r\n// @emitPages=\"更新頁面事件\"\r\nexport default {\r\n  props: ['pages'],\r\n  emits: ['update-page'],\r\n  template: '#pagination-template',\r\n  methods: {\r\n    updatePage (page) {\r\n      if (this.pages.current_page === page) return\r\n      this.$emit('update-page', page)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./Pagination.vue?vue&type=template&id=1aa5092c\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Vue3作業\\\\最終挑戰\\\\project\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<template>\r\n<Loading :active=\"isLoading\"></Loading>\r\n<table class=\"table mt-4 table-striped\">\r\n  <thead>\r\n    <tr>\r\n      <th>購買時間</th>\r\n      <th>Email</th>\r\n      <th>購買款項</th>\r\n      <th>應付金額</th>\r\n      <th>是否付款</th>\r\n      <th>編輯</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <template v-for=\"(item, key) in orders\" :key=\"key\">\r\n    <tr v-if=\"orders.length\" :class=\"{'text-secondary': !item.is_paid}\">\r\n      <td>{{ $filters.date(item.create_at) }}</td>\r\n      <td><span v-text=\"item.user.email\" v-if=\"item.user\"></span></td>\r\n      <td>\r\n        <ul class=\"list-unstyled\">\r\n            <li v-for=\"(product, i) in item.products\" :key=\"i\">\r\n                {{ product.product.title }} 數量： {{ product.qty }} {{ product.product.unit }}\r\n            </li>\r\n        </ul>\r\n      </td>\r\n      <td class=\"text-right\">\r\n        {{ $filters.currency(item.total) }}\r\n      </td>\r\n      <td>\r\n        <div class=\"form-check form-switch\">\r\n          <input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" :id=\"`paidSwitch${item.id}`\" v-model=\"item.is_paid\">\r\n          <label class=\"form-check-label\" :for=\"`paidSwitch${item.id}`\">\r\n            <span class=\"text-success\" v-if=\"item.is_paid\">已付款</span>\r\n            <span class=\"text-muted\" v-else>未付款</span>\r\n          </label>\r\n        </div>\r\n      </td>\r\n      <td>\r\n        <div class=\"btn-group\">\r\n          <button class=\"btn btn-outline-primary btn-sm\" @click=\"openModal(false, item)\">編輯</button>\r\n          <button class=\"btn btn-outline-danger btn-sm\" @click=\"openDelOrderModal(item)\">刪除</button>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n    </template>\r\n  </tbody>\r\n</table>\r\n\r\n<OrderModal :order=\"tempOrder\" ref=\"OrderModal\" @update-paid=\"updatePaid\"></OrderModal>\r\n<Pagination :pages=\"pagination\" @update-page=\"getOrders\"></Pagination>\r\n<DelModal :item=\"tempOrder\" ref=\"delModal\" @del-item=\"delOrder\"></DelModal>\r\n</template>\r\n\r\n<script>\r\nimport DelModal from '@/components/DelModal.vue'\r\nimport OrderModal from '@/components/OrderModal.vue'\r\nimport Pagination from '@/components/Pagination.vue'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      orders: {},\r\n      isNew: false,\r\n      pagination: '',\r\n      current_page: 1,\r\n      isLoading: false,\r\n      tempOrder: {}\r\n    }\r\n  },\r\n  components: {\r\n    Pagination,\r\n    DelModal,\r\n    OrderModal\r\n  },\r\n  inject: ['$httpMessageState'],\r\n  methods: {\r\n    getOrders (page = this.current_page) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders?page=${page}`\r\n      this.$http.get(api)\r\n        .then((response) => {\r\n          if (!response.data.success) {\r\n            this.$httpMessageState(response, '取得訂單')\r\n            this.isLoading = false\r\n            return\r\n          }\r\n          this.orders = response.data.orders\r\n          this.pagination = response.data.pagination\r\n          this.current_page = response.data.pagination.current_page\r\n          if (this.pagination.total_pages > 1) {\r\n            for (let i = 2; i <= this.pagination.total_pages; i += 1) {\r\n              this.$http.get(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders?page=${i}`)\r\n                .then((res) => {\r\n                  if (!res.data.success) {\r\n                    this.$httpMessageState(response, '取得訂單')\r\n                    this.isLoading = false\r\n                  }\r\n                })\r\n            }\r\n          }\r\n          this.isLoading = false\r\n        })\r\n        .catch((error) => {\r\n          this.$httpMessageState(error, '連線錯誤')\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    openModal (isNew, item) {\r\n      this.tempOrder = { ...item }\r\n      this.isNew = false\r\n      const orderComponent = this.$refs.OrderModal\r\n      orderComponent.showModal()\r\n    },\r\n    openDelOrderModal (item) {\r\n      this.tempOrder = { ...item }\r\n      const delComponent = this.$refs.delModal\r\n      delComponent.showModal()\r\n    },\r\n    updatePaid (item) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${item.id}`\r\n      const paid = {\r\n        is_paid: item.is_paid\r\n      }\r\n      this.$http.put(api, { data: paid }).then((response) => {\r\n        this.isLoading = false\r\n        this.getOrders(this.currentPage)\r\n        this.$httpMessageState(response, '更新付款狀態')\r\n      })\r\n    },\r\n    delOrder () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`\r\n      this.isLoading = true\r\n      this.$http.delete(url).then((response) => {\r\n        console.log(response)\r\n        const delComponent = this.$refs.delModal\r\n        delComponent.hideModal()\r\n        this.getOrders(this.currentPage)\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getOrders()\r\n    console.log(process.env.VUE_APP_API)\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\"\r\n       aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\r\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n      <div class=\"modal-content border-0\">\r\n        <div class=\"modal-header bg-dark text-white\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n            <span>訂單細節</span>\r\n          </h5>\r\n          <button type=\"button\" class=\"btn-close\"\r\n                  data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n              <h3>用戶資料</h3>\r\n              <table class=\"table\">\r\n                <tbody v-if=\"tempOrder.user\">\r\n                  <tr>\r\n                    <th style=\"width: 100px;\">姓名</th>\r\n                    <td>{{ tempOrder.user.name }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>Email</th>\r\n                    <td>{{ tempOrder.user.email }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>電話</th>\r\n                    <td>{{ tempOrder.user.tel }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>地址</th>\r\n                    <td>{{ tempOrder.user.address }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div class=\"col-md-8\">\r\n              <h3>訂單細節</h3>\r\n              <table class=\"table\">\r\n                <tbody>\r\n                  <tr>\r\n                    <th style=\"width: 100px\">訂單編號</th>\r\n                    <td>{{ tempOrder.id }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>下單時間</th>\r\n                    <td>{{ $filters.date(tempOrder.create_at)}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>付款時間</th>\r\n                    <td>\r\n                      <span v-if=\"tempOrder.paid_date\">\r\n                        {{ $filters.date(tempOrder.paid_date) }}\r\n                      </span>\r\n                      <span v-else>時間不正確</span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>付款狀態</th>\r\n                    <td>\r\n                      <strong v-if=\"tempOrder.is_paid\" class=\"text-success\">已付款</strong>\r\n                      <span v-else class=\"text-muted\">尚未付款</span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>總金額</th>\r\n                    <td>\r\n                      {{ $filters.currency(tempOrder.total) }}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <h3>選購商品</h3>\r\n              <table class=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"item in tempOrder.products\" :key=\"item.id\">\r\n                    <th>\r\n                      {{ item.product.title }}\r\n                    </th>\r\n                    <td>\r\n                      {{ item.qty }} / {{ item.product.unit }}\r\n                    </td>\r\n                    <td class=\"text-end\">\r\n                      {{ $filters.currency(item.final_total) }}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline-secondary\"\r\n                  data-bs-dismiss=\"modal\">取消\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-primary\"\r\n                  @click=\"$emit('update-order', tempOrder)\">確認</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport modalMixin from '@/mixins/modalMixin'\r\nexport default {\r\n  name: 'OrderModal',\r\n  props: {\r\n    order: {\r\n      type: Object,\r\n      default () { return {} }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      status: {},\r\n      modal: '',\r\n      tempOrder: {},\r\n      isPaid: false\r\n    }\r\n  },\r\n  emits: ['update-product'],\r\n  mixins: [modalMixin],\r\n  inject: ['emitter'],\r\n  watch: {\r\n    order () {\r\n      this.tempOrder = this.order\r\n      this.isPaid = this.tempOrder.is_paid\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./OrderModal.vue?vue&type=template&id=5a3cccbe\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Vue3作業\\\\最終挑戰\\\\project\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Orders.vue?vue&type=template&id=526d29ae\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Vue3作業\\\\最終挑戰\\\\project\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}